version: '3'

services:
        web:
                container_name: pnp-server
                build: ./ppServer
                command: python manage.py runserver 0.0.0.0:8000
                volumes:
                        - ./ppServer/:/usr/src/ppServer/
                ports:
                        - '8000:8000'
                env_file:
                        - ./.env.dev

        db:
                container_name: pnp-db
                image: postgres:12.0-alpine
                volumes:
                        - postgres_data:/var/lib/postgresql/data/
                env_file:
                        - ./.env.dev.db


        cron-backup:
                container_name: pnp-cron-backup
                build: ./cronjobs/backup
                volumes:
                        - ./ppServer/media:/usr/src/media/
                        - ./backups:/usr/src/backups/
                env_file:
                        - ./.env.dev.db

volumes:
  postgres_data:
