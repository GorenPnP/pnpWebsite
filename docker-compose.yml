# version: '3.7'

# services:
#         web:
#                 container_name: pnp-web
#                 build: ./ppServer
#                 command: python manage.py runserver 0.0.0.0:8000
#                 volumes:
#                         - static_volume:/home/ppServer/web/static
#                         - media_volume:/home/ppServer/web/media
#                 expose:
#                         - 8000
#                 env_file:
#                         - ./.env.dev
#                 depends_on:
#                         - db

#         db:
#                 container_name: pnp-db
#                 image: postgres:12.0-alpine
#                 volumes:
#                         - postgres_data:/var/lib/postgresql/data
#                 expose:
#                         - 5432
#                 env_file:
#                         - ./.env.dev.db
        
#         nginx:
#                 container_name: pnp-nginx
#                 build: ./nginx
#                 volumes:
#                         - static_volume:/home/ppServer/web/static
#                         - media_volume:/home/ppServer/web/media
#                         - /var/run/docker.sock:/tmp/docker.sock:ro
                
#                 restart: always
#                 ports:
#                         - 80:80         # http
#                 depends_on:
#                         - web
            
# volumes:
#         postgres_data:
#         static_volume:
#         media_volume:

version: '3.7'

services:
        web:
                container_name: pnp-server
                build: ./ppServer
                command: python manage.py runserver 0.0.0.0:8000
                volumes:
                        - ./ppServer/:/usr/src/ppServer/
                ports:
                        - '8000:8000'
                env_file:
                        - ./.env.dev
                depends_on:
                        - db

        db:
                container_name: pnp-db
                image: postgres:12.0-alpine
                volumes:
                        - postgres_data:/var/lib/postgresql/data/
                env_file:
                        - ./.env.dev.db

volumes:
        postgres_data: