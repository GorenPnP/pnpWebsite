{% extends 'base/headed_main.html' %}

{% block extra-head %}
<style>
#file-accordion {
    width: fit-content;
    margin: auto;
    min-width: min(100%, 60ch);
    --bs-body-color: var(--bs-dark);
    --bs-accordion-active-bg: var(--bs-light);
}
</style>
{% endblock %}

{% block main %}
<div class="accordion" id="file-accordion">

    {% for m in object_list %}
    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button gap-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ m.id }}" aria-expanded="true" aria-controls="collapse-{{ m.id }}">
                <div class="d-flex justify-content-between align-items-start w-100">
                    <div class="ms-2 me-auto">
                        <div class="fw-bold">{{ m.titel }}</div>
                        {{ m.beschreibung|default:"" }}
                    </div>
                    <span class="badge bg-primary rounded-pill">{{ m.files.count|default:0 }}</span>
                </div>
            </button>
        </h2>
        <div id="collapse-{{ m.id }}" class="accordion-collapse collapse show" data-bs-parent="#file-accordion">
            <div class="accordion-body">
                <div class="list-group my-0">
                    {% for f in m.files.all %}
                    <a href="{{ f.file.url }}" class="list-group-item">{{ f.file.name|cut:"files/" }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

</div>  
{% endblock %}
