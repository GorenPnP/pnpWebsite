{% extends 'base/headed_main.html' %}
{% load static %}
{% block extra-head %}
<link rel="stylesheet" href="{% static 'base/css/checkbox.css' %}">
<script src="{% static 'res/js/axios.min.js' %}" type='text/javascript'></script>
<script src="{% static 'base/js/ajax.js' %}"></script>
<script src="{% static 'create/js/landing_page.js' %}"></script>

<style>
    .main-container a { color: var(--bs-light) !important; }
</style>
{% endblock %}

{% block main %}

<div class="container-fluid" style="max-width: 600px; margin: 3em auto 0">
    <table id="hub-table" class="table table-dark table-striped table-hover">
        <thead>
            <tr>
                <th>Erledigt?</th>
                <th>Links</th>
                <th>Werte</th>
            </tr>
        </thead>
        
        <tbody>
            <tr>
                <!-- row for persönlichkeit -->
                <td>
                    <a href="{{ persönlichkeit_row.link }}" target="_blank">
                        <div class="checkbox{% if persönlichkeit_row.done %} checked{% endif %}"></div>
                    </a>
                </td>
                <td><strong>Persönlichkeit</strong> wählen (<a href="{{ persönlichkeit_row.link }}" target="_blank">zur Übersicht</a>)</td>
                <td>
                    <select name="persönlichkeit" onchange="persönlichkeitChange(event)">
                        {% for p in persönlichkeit_row.werte %}
                        <option value="{{ p.id }}" id="option{{ forloop.counter0 }}"{% if p.selected %}selected{% endif %}>
                            {{ p.titel }}
                        </option>
                        {% endfor %}
                    </select>
                </td>
            </tr>

            <!-- other rows -->
            {% for row in rows %}
            <tr>
                <td>
                    <a href="{{ row.link }}">
                        <div class="checkbox
                            {% if row.done %}checked{% endif %}"
                            {% if forloop.last %}style="--checkbox-mark-color: #888888"{% endif %}></div>
                    </a>
                </td>
                <td><a href="{{ row.link }}">{{ row.text|safe }}</a></td>
                <td>{% autoescape off %}{{ row.werte }}{% endautoescape %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form method="get" action="{% url 'create:cp' %}">
        <button type="submit" class="btn btn-lg btn-primary" {% if not done %}disabled{% endif %}>Weiter</button>
    </form>
</div>


{% if infos %}
<aside class="mt-3">
    <p class="h4">Nützliches:</p>
    <ul>
        {% for i in infos %}
        <li>{% autoescape off %}{{ i }}{% endautoescape %}</li>
        {% endfor %}
    </ul>
</aside>
{% endif %}

{% endblock %}
